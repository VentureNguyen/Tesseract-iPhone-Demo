<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: /data/source/tesseract-ocr/textord/colpartition.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract&#160;<span id="projectnumber">3.01</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('colpartition_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/data/source/tesseract-ocr/textord/colpartition.h</div>  </div>
</div>
<div class="contents">
<a href="colpartition_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// File:        colpartition.h</span>
<a name="l00003"></a>00003 <span class="comment">// Description: Class to hold partitions of the page that correspond</span>
<a name="l00004"></a>00004 <span class="comment">//              roughly to text lines.</span>
<a name="l00005"></a>00005 <span class="comment">// Author:      Ray Smith</span>
<a name="l00006"></a>00006 <span class="comment">// Created:     Thu Aug 14 10:50:01 PDT 2008</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// (C) Copyright 2008, Google Inc.</span>
<a name="l00009"></a>00009 <span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00010"></a>00010 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00011"></a>00011 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00012"></a>00012 <span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00013"></a>00013 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00014"></a>00014 <span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00015"></a>00015 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00016"></a>00016 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00017"></a>00017 <span class="comment">// limitations under the License.</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment"></span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef TESSERACT_TEXTORD_COLPARTITION_H__</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define TESSERACT_TEXTORD_COLPARTITION_H__</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="bbgrid_8h.html">bbgrid.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="blobbox_8h.html">blobbox.h</a>&quot;</span>       <span class="comment">// For BlobRegionType.</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="ndminx_8h.html">ndminx.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="ocrblock_8h.html">ocrblock.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="rect_8h.html">rect.h</a>&quot;</span>           <span class="comment">// For TBOX.</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="scrollview_8h.html">scrollview.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="tabfind_8h.html">tabfind.h</a>&quot;</span>        <span class="comment">// For WidthCallback.</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="tabvector_8h.html">tabvector.h</a>&quot;</span>      <span class="comment">// For BLOBNBOX_CLIST.</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">namespace </span>tesseract {
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="comment">// Number of colors in the color1, color2 arrays.</span>
<a name="l00036"></a><a class="code" href="namespacetesseract.html#abd090245debb6dcc506aba8f62da938b">00036</a> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="namespacetesseract.html#abd090245debb6dcc506aba8f62da938b">kRGBRMSColors</a> = 4;
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classtesseract_1_1_working_part_set.html">WorkingPartSet</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span>WorkingPartSet_LIST;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">// An enum to indicate how a partition sits on the columns.</span>
<a name="l00045"></a>00045 <span class="comment">// The order of flowing/heading/pullout must be kept consistent with</span>
<a name="l00046"></a>00046 <span class="comment">// PolyBlockType.</span>
<a name="l00047"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06a">00047</a> <span class="keyword">enum</span> <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06a">ColumnSpanningType</a> {
<a name="l00048"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aad17bb659c6735f37306a6161f4013416">00048</a>   <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aad17bb659c6735f37306a6161f4013416">CST_NOISE</a>,        <span class="comment">// Strictly between columns.</span>
<a name="l00049"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa53dd9af51c333b786fe51bd5f01543d6">00049</a>   <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa53dd9af51c333b786fe51bd5f01543d6">CST_FLOWING</a>,      <span class="comment">// Strictly within a single column.</span>
<a name="l00050"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aacf3616b52ca15a43ddfd40b9c91c9cd5">00050</a>   <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aacf3616b52ca15a43ddfd40b9c91c9cd5">CST_HEADING</a>,      <span class="comment">// Spans multiple columns.</span>
<a name="l00051"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa8c1a2f43d95cbf09416204e1f5e04163">00051</a>   <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa8c1a2f43d95cbf09416204e1f5e04163">CST_PULLOUT</a>,      <span class="comment">// Touches multiple columns, but doesn&#39;t span them.</span>
<a name="l00052"></a><a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa9f98f32893c3f27ef2373aec2d9f7205">00052</a>   <a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06aa9f98f32893c3f27ef2373aec2d9f7205">CST_COUNT</a>         <span class="comment">// Number of entries.</span>
<a name="l00053"></a>00053 };
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <a class="code" href="elst2_8h.html#a790562c8bc97eb7c596d2388a3b2918c">ELIST2IZEH</a>(ColPartition)
<a name="l00056"></a>00056 <a class="code" href="reject_8cpp.html#a1f7e3099e20129096036e0edad5592e9">CLISTIZEH</a>(ColPartition)
<a name="l00057"></a>00057 
<a name="l00067"></a><a class="code" href="classtesseract_1_1_col_partition.html">00067</a> class <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a> : public <a class="code" href="class_e_l_i_s_t2___l_i_n_k.html">ELIST2_LINK</a> {
<a name="l00068"></a>00068  <span class="keyword">public</span>:
<a name="l00069"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac9838a760a9e246080953da4af85091d">00069</a>   <a class="code" href="classtesseract_1_1_col_partition.html#ac9838a760a9e246080953da4af85091d">ColPartition</a>() {
<a name="l00070"></a>00070     <span class="comment">// This empty constructor is here only so that the class can be ELISTIZED.</span>
<a name="l00071"></a>00071     <span class="comment">// TODO(rays) change deep_copy in elst.h line 955 to take a callback copier</span>
<a name="l00072"></a>00072     <span class="comment">// and eliminate CLASSNAME##_copier.</span>
<a name="l00073"></a>00073   }
<a name="l00078"></a>00078   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>(<a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> blob_type, <span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; vertical);
<a name="l00083"></a>00083   <span class="keyword">static</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* MakeLinePartition(<a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> blob_type,
<a name="l00084"></a>00084                                          <span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; vertical,
<a name="l00085"></a>00085                                          <span class="keywordtype">int</span> left, <span class="keywordtype">int</span> bottom,
<a name="l00086"></a>00086                                          <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> top);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="comment">// Constructs and returns a fake ColPartition with a single fake BLOBNBOX,</span>
<a name="l00089"></a>00089   <span class="comment">// all made from a single TBOX.</span>
<a name="l00090"></a>00090   <span class="comment">// WARNING: Despite being on C_LISTs, the BLOBNBOX owns the C_BLOB and</span>
<a name="l00091"></a>00091   <span class="comment">// the ColPartition owns the BLOBNBOX!!!</span>
<a name="l00092"></a>00092   <span class="comment">// Call DeleteBoxes before deleting the ColPartition.</span>
<a name="l00093"></a>00093   <span class="keyword">static</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* FakePartition(<span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   ~<a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>();
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="comment">// Simple accessors.</span>
<a name="l00098"></a><a class="code" href="classtesseract_1_1_col_partition.html#aeb52b4505d6766abfd0a2a3ce92a6596">00098</a>   <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; <a class="code" href="classtesseract_1_1_col_partition.html#aeb52b4505d6766abfd0a2a3ce92a6596">bounding_box</a>()<span class="keyword"> const </span>{
<a name="l00099"></a>00099     <span class="keywordflow">return</span> bounding_box_;
<a name="l00100"></a>00100   }
<a name="l00101"></a><a class="code" href="classtesseract_1_1_col_partition.html#a9890069a7855a61403f315444d2cd917">00101</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a9890069a7855a61403f315444d2cd917">left_margin</a>()<span class="keyword"> const </span>{
<a name="l00102"></a>00102     <span class="keywordflow">return</span> left_margin_;
<a name="l00103"></a>00103   }
<a name="l00104"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4e520240723057ceeeb6c58972cca743">00104</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a4e520240723057ceeeb6c58972cca743">set_left_margin</a>(<span class="keywordtype">int</span> margin) {
<a name="l00105"></a>00105     left_margin_ = margin;
<a name="l00106"></a>00106   }
<a name="l00107"></a><a class="code" href="classtesseract_1_1_col_partition.html#a07fd7ed32fdb14f773374d45c4ef8a90">00107</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a07fd7ed32fdb14f773374d45c4ef8a90">right_margin</a>()<span class="keyword"> const </span>{
<a name="l00108"></a>00108     <span class="keywordflow">return</span> right_margin_;
<a name="l00109"></a>00109   }
<a name="l00110"></a><a class="code" href="classtesseract_1_1_col_partition.html#a34751cfa30b22b7bc405334843682cf4">00110</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a34751cfa30b22b7bc405334843682cf4">set_right_margin</a>(<span class="keywordtype">int</span> margin) {
<a name="l00111"></a>00111     right_margin_ = margin;
<a name="l00112"></a>00112   }
<a name="l00113"></a><a class="code" href="classtesseract_1_1_col_partition.html#a3d4e0280ce16c899b22ecb5741c7f4db">00113</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a3d4e0280ce16c899b22ecb5741c7f4db">median_top</a>()<span class="keyword"> const </span>{
<a name="l00114"></a>00114     <span class="keywordflow">return</span> median_top_;
<a name="l00115"></a>00115   }
<a name="l00116"></a><a class="code" href="classtesseract_1_1_col_partition.html#a9f0978c738e29da8c7474beb0024a62f">00116</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a9f0978c738e29da8c7474beb0024a62f">median_bottom</a>()<span class="keyword"> const </span>{
<a name="l00117"></a>00117     <span class="keywordflow">return</span> median_bottom_;
<a name="l00118"></a>00118   }
<a name="l00119"></a><a class="code" href="classtesseract_1_1_col_partition.html#a2ede8f204ed66939a0c4352657da6c94">00119</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a2ede8f204ed66939a0c4352657da6c94">median_size</a>()<span class="keyword"> const </span>{
<a name="l00120"></a>00120     <span class="keywordflow">return</span> median_size_;
<a name="l00121"></a>00121   }
<a name="l00122"></a><a class="code" href="classtesseract_1_1_col_partition.html#ae0e571d982e596e62bf19e69d2442d52">00122</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#ae0e571d982e596e62bf19e69d2442d52">set_median_size</a>(<span class="keywordtype">int</span> size) {
<a name="l00123"></a>00123     median_size_ = size;
<a name="l00124"></a>00124   }
<a name="l00125"></a><a class="code" href="classtesseract_1_1_col_partition.html#ae6dbcc0f37246998a114bbe2432d1969">00125</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#ae6dbcc0f37246998a114bbe2432d1969">median_width</a>()<span class="keyword"> const </span>{
<a name="l00126"></a>00126     <span class="keywordflow">return</span> median_width_;
<a name="l00127"></a>00127   }
<a name="l00128"></a><a class="code" href="classtesseract_1_1_col_partition.html#a69f66c8d14ded7a4893b7c99cb4c87c2">00128</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a69f66c8d14ded7a4893b7c99cb4c87c2">set_median_width</a>(<span class="keywordtype">int</span> width) {
<a name="l00129"></a>00129     median_width_ = width;
<a name="l00130"></a>00130   }
<a name="l00131"></a><a class="code" href="classtesseract_1_1_col_partition.html#a644ec0c0a7bf20b9aca71b8413b2a87e">00131</a>   <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> <a class="code" href="classtesseract_1_1_col_partition.html#a644ec0c0a7bf20b9aca71b8413b2a87e">blob_type</a>()<span class="keyword"> const </span>{
<a name="l00132"></a>00132     <span class="keywordflow">return</span> blob_type_;
<a name="l00133"></a>00133   }
<a name="l00134"></a><a class="code" href="classtesseract_1_1_col_partition.html#a67554d4553f198980b504091557442c7">00134</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a67554d4553f198980b504091557442c7">set_blob_type</a>(<a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> t) {
<a name="l00135"></a>00135     blob_type_ = t;
<a name="l00136"></a>00136   }
<a name="l00137"></a><a class="code" href="classtesseract_1_1_col_partition.html#a811bd892dfa5eeba0b17b77794d79754">00137</a>   <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1">BlobTextFlowType</a> <a class="code" href="classtesseract_1_1_col_partition.html#a811bd892dfa5eeba0b17b77794d79754">flow</a>()<span class="keyword"> const </span>{
<a name="l00138"></a>00138     <span class="keywordflow">return</span> flow_;
<a name="l00139"></a>00139   }
<a name="l00140"></a><a class="code" href="classtesseract_1_1_col_partition.html#aff449be10b9bb6e480b65cd1042e38e4">00140</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#aff449be10b9bb6e480b65cd1042e38e4">set_flow</a>(<a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1">BlobTextFlowType</a> <a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>) {
<a name="l00141"></a>00141     flow_ = <a class="code" href="imgscale_8cpp.html#a469169df397b589e709dc744f1346831">f</a>;
<a name="l00142"></a>00142   }
<a name="l00143"></a><a class="code" href="classtesseract_1_1_col_partition.html#acaadf59a14518e62356f27786d63ae42">00143</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#acaadf59a14518e62356f27786d63ae42">good_blob_score</a>()<span class="keyword"> const </span>{
<a name="l00144"></a>00144     <span class="keywordflow">return</span> good_blob_score_;
<a name="l00145"></a>00145   }
<a name="l00146"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0bd194403074c23e54e840c6a5d7214b">00146</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0bd194403074c23e54e840c6a5d7214b">good_width</a>()<span class="keyword"> const </span>{
<a name="l00147"></a>00147     <span class="keywordflow">return</span> good_width_;
<a name="l00148"></a>00148   }
<a name="l00149"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0ddb453820cf0860bef4a27ed649e2b0">00149</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0ddb453820cf0860bef4a27ed649e2b0">good_column</a>()<span class="keyword"> const </span>{
<a name="l00150"></a>00150     <span class="keywordflow">return</span> good_column_;
<a name="l00151"></a>00151   }
<a name="l00152"></a><a class="code" href="classtesseract_1_1_col_partition.html#abd6ba69b1f29c267933378d801477857">00152</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#abd6ba69b1f29c267933378d801477857">left_key_tab</a>()<span class="keyword"> const </span>{
<a name="l00153"></a>00153     <span class="keywordflow">return</span> left_key_tab_;
<a name="l00154"></a>00154   }
<a name="l00155"></a><a class="code" href="classtesseract_1_1_col_partition.html#a05a26aa4023ea05c8d243cb66561ea89">00155</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a05a26aa4023ea05c8d243cb66561ea89">left_key</a>()<span class="keyword"> const </span>{
<a name="l00156"></a>00156     <span class="keywordflow">return</span> left_key_;
<a name="l00157"></a>00157   }
<a name="l00158"></a><a class="code" href="classtesseract_1_1_col_partition.html#a46af5fe18c2f7142ae9e900a62b1a3d2">00158</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a46af5fe18c2f7142ae9e900a62b1a3d2">right_key_tab</a>()<span class="keyword"> const </span>{
<a name="l00159"></a>00159     <span class="keywordflow">return</span> right_key_tab_;
<a name="l00160"></a>00160   }
<a name="l00161"></a><a class="code" href="classtesseract_1_1_col_partition.html#af8dc1730e816c82cf3007943dc70a363">00161</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#af8dc1730e816c82cf3007943dc70a363">right_key</a>()<span class="keyword"> const </span>{
<a name="l00162"></a>00162     <span class="keywordflow">return</span> right_key_;
<a name="l00163"></a>00163   }
<a name="l00164"></a><a class="code" href="classtesseract_1_1_col_partition.html#a32e3f08af42cf1e5ad99118b6fd66df2">00164</a>   <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> <a class="code" href="classtesseract_1_1_col_partition.html#a32e3f08af42cf1e5ad99118b6fd66df2">type</a>()<span class="keyword"> const </span>{
<a name="l00165"></a>00165     <span class="keywordflow">return</span> type_;
<a name="l00166"></a>00166   }
<a name="l00167"></a><a class="code" href="classtesseract_1_1_col_partition.html#a9fcf07be83840289187d6358ee752a46">00167</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a9fcf07be83840289187d6358ee752a46">set_type</a>(<a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> t) {
<a name="l00168"></a>00168     type_ = t;
<a name="l00169"></a>00169   }
<a name="l00170"></a><a class="code" href="classtesseract_1_1_col_partition.html#a3fc2dd797ede7a62546b2565811e9ce0">00170</a>   BLOBNBOX_CLIST* <a class="code" href="classtesseract_1_1_col_partition.html#a3fc2dd797ede7a62546b2565811e9ce0">boxes</a>() {
<a name="l00171"></a>00171     <span class="keywordflow">return</span> &amp;boxes_;
<a name="l00172"></a>00172   }
<a name="l00173"></a><a class="code" href="classtesseract_1_1_col_partition.html#a5632ec24bcc7483eb943a325a73c47dc">00173</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a5632ec24bcc7483eb943a325a73c47dc">boxes_count</a>()<span class="keyword"> const </span>{
<a name="l00174"></a>00174     <span class="keywordflow">return</span> boxes_.length();
<a name="l00175"></a>00175   }
<a name="l00176"></a><a class="code" href="classtesseract_1_1_col_partition.html#a8a60c7f2c817055b9331028495cb25b1">00176</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a8a60c7f2c817055b9331028495cb25b1">set_vertical</a>(<span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; v) {
<a name="l00177"></a>00177     vertical_ = v;
<a name="l00178"></a>00178   }
<a name="l00179"></a><a class="code" href="classtesseract_1_1_col_partition.html#a30fcadc2cf28369bb4634988ace3fd5a">00179</a>   ColPartition_CLIST* <a class="code" href="classtesseract_1_1_col_partition.html#a30fcadc2cf28369bb4634988ace3fd5a">upper_partners</a>() {
<a name="l00180"></a>00180     <span class="keywordflow">return</span> &amp;upper_partners_;
<a name="l00181"></a>00181   }
<a name="l00182"></a><a class="code" href="classtesseract_1_1_col_partition.html#abe20d8e0d6b3a347f3b9d4e43023fec4">00182</a>   ColPartition_CLIST* <a class="code" href="classtesseract_1_1_col_partition.html#abe20d8e0d6b3a347f3b9d4e43023fec4">lower_partners</a>() {
<a name="l00183"></a>00183     <span class="keywordflow">return</span> &amp;lower_partners_;
<a name="l00184"></a>00184   }
<a name="l00185"></a><a class="code" href="classtesseract_1_1_col_partition.html#a45dd9aed3c27b47c64dd01dd35b81b95">00185</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a45dd9aed3c27b47c64dd01dd35b81b95">set_working_set</a>(<a class="code" href="classtesseract_1_1_working_part_set.html">WorkingPartSet</a>* working_set) {
<a name="l00186"></a>00186     working_set_ = working_set;
<a name="l00187"></a>00187   }
<a name="l00188"></a><a class="code" href="classtesseract_1_1_col_partition.html#aa5e088aff13b0c427a9b984b3be7a4b5">00188</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#aa5e088aff13b0c427a9b984b3be7a4b5">desperately_merged</a>()<span class="keyword"> const </span>{
<a name="l00189"></a>00189     <span class="keywordflow">return</span> desperately_merged_;
<a name="l00190"></a>00190   }
<a name="l00191"></a><a class="code" href="classtesseract_1_1_col_partition.html#a933e3f4465500ce46002ddaeab29a37c">00191</a>   <a class="code" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a>* <a class="code" href="classtesseract_1_1_col_partition.html#a933e3f4465500ce46002ddaeab29a37c">column_set</a>()<span class="keyword"> const </span>{
<a name="l00192"></a>00192     <span class="keywordflow">return</span> column_set_;
<a name="l00193"></a>00193   }
<a name="l00194"></a><a class="code" href="classtesseract_1_1_col_partition.html#a2d324bc11a9d4a3bf1449dc8005cd7d4">00194</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a2d324bc11a9d4a3bf1449dc8005cd7d4">set_side_step</a>(<span class="keywordtype">int</span> step) {
<a name="l00195"></a>00195     side_step_ = step;
<a name="l00196"></a>00196   }
<a name="l00197"></a><a class="code" href="classtesseract_1_1_col_partition.html#a01e366848d0b2f4ee921124f32cc63b3">00197</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a01e366848d0b2f4ee921124f32cc63b3">bottom_spacing</a>()<span class="keyword"> const </span>{
<a name="l00198"></a>00198     <span class="keywordflow">return</span> bottom_spacing_;
<a name="l00199"></a>00199   }
<a name="l00200"></a><a class="code" href="classtesseract_1_1_col_partition.html#acb549b8ad0b5015282257086daa89b3f">00200</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#acb549b8ad0b5015282257086daa89b3f">set_bottom_spacing</a>(<span class="keywordtype">int</span> spacing) {
<a name="l00201"></a>00201     bottom_spacing_ = spacing;
<a name="l00202"></a>00202   }
<a name="l00203"></a><a class="code" href="classtesseract_1_1_col_partition.html#aaa8e68fc867682b5e496103fdfea55bf">00203</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#aaa8e68fc867682b5e496103fdfea55bf">top_spacing</a>()<span class="keyword"> const </span>{
<a name="l00204"></a>00204     <span class="keywordflow">return</span> top_spacing_;
<a name="l00205"></a>00205   }
<a name="l00206"></a><a class="code" href="classtesseract_1_1_col_partition.html#adfd69195728ae38f067ad536c4290e9c">00206</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#adfd69195728ae38f067ad536c4290e9c">set_top_spacing</a>(<span class="keywordtype">int</span> spacing) {
<a name="l00207"></a>00207     top_spacing_ = spacing;
<a name="l00208"></a>00208   }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classtesseract_1_1_col_partition.html#abc55e0535959583318b4ce0271c85da2">00210</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#abc55e0535959583318b4ce0271c85da2">set_table_type</a>() {
<a name="l00211"></a>00211     <span class="keywordflow">if</span> (type_ != <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) {
<a name="l00212"></a>00212       type_before_table_ = type_;
<a name="l00213"></a>00213       type_ = <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>;
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215   }
<a name="l00216"></a><a class="code" href="classtesseract_1_1_col_partition.html#a548b8797ceca6d820370cabe0711c808">00216</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a548b8797ceca6d820370cabe0711c808">clear_table_type</a>() {
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (type_ == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)
<a name="l00218"></a>00218       type_ = type_before_table_;
<a name="l00219"></a>00219   }
<a name="l00220"></a><a class="code" href="classtesseract_1_1_col_partition.html#a40132dd64a9e916ca809b9494e1a5cdd">00220</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a40132dd64a9e916ca809b9494e1a5cdd">inside_table_column</a>() {
<a name="l00221"></a>00221     <span class="keywordflow">return</span> inside_table_column_;
<a name="l00222"></a>00222   }
<a name="l00223"></a><a class="code" href="classtesseract_1_1_col_partition.html#a99763d5dc4eee42bb6142ffc2ddae1de">00223</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a99763d5dc4eee42bb6142ffc2ddae1de">set_inside_table_column</a>(<span class="keywordtype">bool</span> val) {
<a name="l00224"></a>00224     inside_table_column_ = val;
<a name="l00225"></a>00225   }
<a name="l00226"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4df588400a880c9ac54eea8d1d7c28fb">00226</a>   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* <a class="code" href="classtesseract_1_1_col_partition.html#a4df588400a880c9ac54eea8d1d7c28fb">nearest_neighbor_above</a>()<span class="keyword"> const </span>{
<a name="l00227"></a>00227     <span class="keywordflow">return</span> nearest_neighbor_above_;
<a name="l00228"></a>00228   }
<a name="l00229"></a><a class="code" href="classtesseract_1_1_col_partition.html#a5b00935a33d05ca217802b4d7591b1a2">00229</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a5b00935a33d05ca217802b4d7591b1a2">set_nearest_neighbor_above</a>(<a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* part) {
<a name="l00230"></a>00230     nearest_neighbor_above_ = part;
<a name="l00231"></a>00231   }
<a name="l00232"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4eac60eb833ebb548ff2409c5999753f">00232</a>   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* <a class="code" href="classtesseract_1_1_col_partition.html#a4eac60eb833ebb548ff2409c5999753f">nearest_neighbor_below</a>()<span class="keyword"> const </span>{
<a name="l00233"></a>00233     <span class="keywordflow">return</span> nearest_neighbor_below_;
<a name="l00234"></a>00234   }
<a name="l00235"></a><a class="code" href="classtesseract_1_1_col_partition.html#a6bb36d2ee748af0b77c8b2742ef5741a">00235</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a6bb36d2ee748af0b77c8b2742ef5741a">set_nearest_neighbor_below</a>(<a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* part) {
<a name="l00236"></a>00236     nearest_neighbor_below_ = part;
<a name="l00237"></a>00237   }
<a name="l00238"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0ec12f1a3ec7b885749c16a798b3c794">00238</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0ec12f1a3ec7b885749c16a798b3c794">space_above</a>()<span class="keyword"> const </span>{
<a name="l00239"></a>00239     <span class="keywordflow">return</span> space_above_;
<a name="l00240"></a>00240   }
<a name="l00241"></a><a class="code" href="classtesseract_1_1_col_partition.html#a83c96bfabcdbf1d17a676a614a43337f">00241</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a83c96bfabcdbf1d17a676a614a43337f">set_space_above</a>(<span class="keywordtype">int</span> space) {
<a name="l00242"></a>00242     space_above_ = space;
<a name="l00243"></a>00243   }
<a name="l00244"></a><a class="code" href="classtesseract_1_1_col_partition.html#a46abe5ef4b5224d671c50d1de5ac985b">00244</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a46abe5ef4b5224d671c50d1de5ac985b">space_below</a>()<span class="keyword"> const </span>{
<a name="l00245"></a>00245     <span class="keywordflow">return</span> space_below_;
<a name="l00246"></a>00246   }
<a name="l00247"></a><a class="code" href="classtesseract_1_1_col_partition.html#ad2083c18299f4e6850ca4d5d6ba9c83d">00247</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#ad2083c18299f4e6850ca4d5d6ba9c83d">set_space_below</a>(<span class="keywordtype">int</span> space) {
<a name="l00248"></a>00248     space_below_ = space;
<a name="l00249"></a>00249   }
<a name="l00250"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4c55a12d96d51a9710edc292c1946ca1">00250</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a4c55a12d96d51a9710edc292c1946ca1">space_to_left</a>()<span class="keyword"> const </span>{
<a name="l00251"></a>00251     <span class="keywordflow">return</span> space_to_left_;
<a name="l00252"></a>00252   }
<a name="l00253"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0de8ea9569a2b819639e3c69654fbe1d">00253</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0de8ea9569a2b819639e3c69654fbe1d">set_space_to_left</a>(<span class="keywordtype">int</span> space) {
<a name="l00254"></a>00254     space_to_left_ = space;
<a name="l00255"></a>00255   }
<a name="l00256"></a><a class="code" href="classtesseract_1_1_col_partition.html#a2e061b11b010ed6ee0382300f423735c">00256</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a2e061b11b010ed6ee0382300f423735c">space_to_right</a>()<span class="keyword"> const </span>{
<a name="l00257"></a>00257     <span class="keywordflow">return</span> space_to_right_;
<a name="l00258"></a>00258   }
<a name="l00259"></a><a class="code" href="classtesseract_1_1_col_partition.html#aa6bbfdc1a1f7c0384225c8691e27613a">00259</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#aa6bbfdc1a1f7c0384225c8691e27613a">set_space_to_right</a>(<span class="keywordtype">int</span> space) {
<a name="l00260"></a>00260     space_to_right_ = space;
<a name="l00261"></a>00261   }
<a name="l00262"></a><a class="code" href="classtesseract_1_1_col_partition.html#a944cdc529d0028111080627854c8bbc0">00262</a>   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* <a class="code" href="classtesseract_1_1_col_partition.html#a944cdc529d0028111080627854c8bbc0">color1</a>() {
<a name="l00263"></a>00263     <span class="keywordflow">return</span> color1_;
<a name="l00264"></a>00264   }
<a name="l00265"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4b52103bab1483c16849f0ac8666a9fe">00265</a>   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* <a class="code" href="classtesseract_1_1_col_partition.html#a4b52103bab1483c16849f0ac8666a9fe">color2</a>() {
<a name="l00266"></a>00266     <span class="keywordflow">return</span> color2_;
<a name="l00267"></a>00267   }
<a name="l00268"></a><a class="code" href="classtesseract_1_1_col_partition.html#adb5b080242a8eacde82dd88186ad2cf3">00268</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#adb5b080242a8eacde82dd88186ad2cf3">owns_blobs</a>()<span class="keyword"> const </span>{
<a name="l00269"></a>00269     <span class="keywordflow">return</span> owns_blobs_;
<a name="l00270"></a>00270   }
<a name="l00271"></a><a class="code" href="classtesseract_1_1_col_partition.html#a9d675a150a71185ddf17c23ae52c568a">00271</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#a9d675a150a71185ddf17c23ae52c568a">set_owns_blobs</a>(<span class="keywordtype">bool</span> owns_blobs) {
<a name="l00272"></a>00272     <span class="comment">// Do NOT change ownership flag when there are blobs in the list.</span>
<a name="l00273"></a>00273     <span class="comment">// Immediately set the ownership flag when creating copies.</span>
<a name="l00274"></a>00274     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(boxes_.empty());
<a name="l00275"></a>00275     owns_blobs_ = owns_blobs;
<a name="l00276"></a>00276   }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <span class="comment">// Inline quasi-accessors that require some computation.</span>
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <span class="comment">// Returns the middle y-coord of the bounding box.</span>
<a name="l00281"></a><a class="code" href="classtesseract_1_1_col_partition.html#acfb9938222780d3957049698e2bde9e6">00281</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#acfb9938222780d3957049698e2bde9e6">MidY</a>()<span class="keyword"> const </span>{
<a name="l00282"></a>00282     <span class="keywordflow">return</span> (bounding_box_.top() + bounding_box_.bottom()) / 2;
<a name="l00283"></a>00283   }
<a name="l00284"></a>00284   <span class="comment">// Returns the middle y-coord of the median top and bottom.</span>
<a name="l00285"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4c635a35332c62bcc9c62b0f46e403cd">00285</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a4c635a35332c62bcc9c62b0f46e403cd">MedianY</a>()<span class="keyword"> const </span>{
<a name="l00286"></a>00286     <span class="keywordflow">return</span> (median_top_ + median_bottom_) / 2;
<a name="l00287"></a>00287   }
<a name="l00288"></a>00288   <span class="comment">// Returns the middle x-coord of the bounding box.</span>
<a name="l00289"></a><a class="code" href="classtesseract_1_1_col_partition.html#add960a03f31697fffec9449db86a825d">00289</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#add960a03f31697fffec9449db86a825d">MidX</a>()<span class="keyword"> const </span>{
<a name="l00290"></a>00290     <span class="keywordflow">return</span> (bounding_box_.left() + bounding_box_.right()) / 2;
<a name="l00291"></a>00291   }
<a name="l00292"></a>00292   <span class="comment">// Returns the sort key at any given x,y.</span>
<a name="l00293"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac48d211f853e26daced218323544b393">00293</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac48d211f853e26daced218323544b393">SortKey</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword"> const </span>{
<a name="l00294"></a>00294     <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_tab_vector.html#a0a7ad486360b4844a7816fec6ad5d870">TabVector::SortKey</a>(vertical_, x, y);
<a name="l00295"></a>00295   }
<a name="l00296"></a>00296   <span class="comment">// Returns the x corresponding to the sortkey, y pair.</span>
<a name="l00297"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0194fb90361732323fa9c1d0c4b65d9c">00297</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0194fb90361732323fa9c1d0c4b65d9c">XAtY</a>(<span class="keywordtype">int</span> sort_key, <span class="keywordtype">int</span> y)<span class="keyword"> const </span>{
<a name="l00298"></a>00298     <span class="keywordflow">return</span> <a class="code" href="classtesseract_1_1_tab_vector.html#ae9a41b6a0ecc21d4ed94e4c8da804e0d">TabVector::XAtY</a>(vertical_, sort_key, y);
<a name="l00299"></a>00299   }
<a name="l00300"></a>00300   <span class="comment">// Returns the x difference between the two sort keys.</span>
<a name="l00301"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac45a47a9427bf943acba1c0ae7d8ed0b">00301</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac45a47a9427bf943acba1c0ae7d8ed0b">KeyWidth</a>(<span class="keywordtype">int</span> left_key, <span class="keywordtype">int</span> right_key)<span class="keyword"> const </span>{
<a name="l00302"></a>00302     <span class="keywordflow">return</span> (right_key - left_key) / vertical_.y();
<a name="l00303"></a>00303   }
<a name="l00304"></a>00304   <span class="comment">// Returns the column width between the left and right keys.</span>
<a name="l00305"></a><a class="code" href="classtesseract_1_1_col_partition.html#a74b26d9aa211f39f58fe9b6c60f324eb">00305</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a74b26d9aa211f39f58fe9b6c60f324eb">ColumnWidth</a>()<span class="keyword"> const </span>{
<a name="l00306"></a>00306     <span class="keywordflow">return</span> KeyWidth(left_key_, right_key_);
<a name="l00307"></a>00307   }
<a name="l00308"></a>00308   <span class="comment">// Returns the sort key of the box left edge.</span>
<a name="l00309"></a><a class="code" href="classtesseract_1_1_col_partition.html#af8679f5d1f87946bcd821dd2ffe1e80e">00309</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#af8679f5d1f87946bcd821dd2ffe1e80e">BoxLeftKey</a>()<span class="keyword"> const </span>{
<a name="l00310"></a>00310     <span class="keywordflow">return</span> SortKey(bounding_box_.left(), MidY());
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312   <span class="comment">// Returns the sort key of the box right edge.</span>
<a name="l00313"></a><a class="code" href="classtesseract_1_1_col_partition.html#a498b82d4970d0c0fe24c59e27d5933e7">00313</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a498b82d4970d0c0fe24c59e27d5933e7">BoxRightKey</a>()<span class="keyword"> const </span>{
<a name="l00314"></a>00314     <span class="keywordflow">return</span> SortKey(bounding_box_.right(), MidY());
<a name="l00315"></a>00315   }
<a name="l00316"></a>00316   <span class="comment">// Returns the left edge at the given y, using the sort key.</span>
<a name="l00317"></a><a class="code" href="classtesseract_1_1_col_partition.html#ab71e3aebabe8a0a9e3cde26f84ec4f46">00317</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#ab71e3aebabe8a0a9e3cde26f84ec4f46">LeftAtY</a>(<span class="keywordtype">int</span> y)<span class="keyword"> const </span>{
<a name="l00318"></a>00318     <span class="keywordflow">return</span> XAtY(left_key_, y);
<a name="l00319"></a>00319   }
<a name="l00320"></a>00320   <span class="comment">// Returns the right edge at the given y, using the sort key.</span>
<a name="l00321"></a><a class="code" href="classtesseract_1_1_col_partition.html#a3731935e70135384e25904d65c0ca8f7">00321</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a3731935e70135384e25904d65c0ca8f7">RightAtY</a>(<span class="keywordtype">int</span> y)<span class="keyword"> const </span>{
<a name="l00322"></a>00322     <span class="keywordflow">return</span> XAtY(right_key_, y);
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324   <span class="comment">// Returns true if the right edge of this is to the left of the right</span>
<a name="l00325"></a>00325   <span class="comment">// edge of other.</span>
<a name="l00326"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac851e3fbb5932b448969ce4e3bd7f471">00326</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac851e3fbb5932b448969ce4e3bd7f471">IsLeftOf</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00327"></a>00327     <span class="keywordflow">return</span> bounding_box_.right() &lt; other.bounding_box_.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
<a name="l00328"></a>00328   }
<a name="l00329"></a>00329   <span class="comment">// Returns true if the partition contains the given x coordinate at the y.</span>
<a name="l00330"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac7729e02ee4765d7612a0ec045681512">00330</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac7729e02ee4765d7612a0ec045681512">ColumnContains</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword"> const </span>{
<a name="l00331"></a>00331     <span class="keywordflow">return</span> LeftAtY(y) - 1 &lt;= x &amp;&amp; x &lt;= RightAtY(y) + 1;
<a name="l00332"></a>00332   }
<a name="l00333"></a>00333   <span class="comment">// Returns true if there are no blobs in the list.</span>
<a name="l00334"></a><a class="code" href="classtesseract_1_1_col_partition.html#aa1c839940b58f4e6c3dbfa71294fff47">00334</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#aa1c839940b58f4e6c3dbfa71294fff47">IsEmpty</a>()<span class="keyword"> const </span>{
<a name="l00335"></a>00335     <span class="keywordflow">return</span> boxes_.empty();
<a name="l00336"></a>00336   }
<a name="l00337"></a>00337   <span class="comment">// Returns true if there is a single blob in the list.</span>
<a name="l00338"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac34862007d633ee3d726492150e8c672">00338</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac34862007d633ee3d726492150e8c672">IsSingleton</a>()<span class="keyword"> const </span>{
<a name="l00339"></a>00339     <span class="keywordflow">return</span> boxes_.singleton();
<a name="l00340"></a>00340   }
<a name="l00341"></a>00341   <span class="comment">// Returns true if this and other overlap horizontally by bounding box.</span>
<a name="l00342"></a><a class="code" href="classtesseract_1_1_col_partition.html#a43b5ff6a41c8f72876ca2d2c9683a2e6">00342</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a43b5ff6a41c8f72876ca2d2c9683a2e6">HOverlaps</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00343"></a>00343     <span class="keywordflow">return</span> bounding_box_.x_overlap(other.bounding_box_);
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345   <span class="comment">// Returns true if this and other can be combined without putting a</span>
<a name="l00346"></a>00346   <span class="comment">// horizontal step in either left or right edge.</span>
<a name="l00347"></a><a class="code" href="classtesseract_1_1_col_partition.html#ad4b2034a4dff8f9d5106577a06e214fe">00347</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#ad4b2034a4dff8f9d5106577a06e214fe">HCompatible</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00348"></a>00348     <span class="keywordflow">return</span> left_margin_ &lt;= other.bounding_box_.<a class="code" href="class_t_b_o_x.html#a724fabf566586b663577dfa944ffbc61">left</a>() &amp;&amp;
<a name="l00349"></a>00349            bounding_box_.left() &gt;= other.left_margin_ &amp;&amp;
<a name="l00350"></a>00350            bounding_box_.right() &lt;= other.right_margin_ &amp;&amp;
<a name="l00351"></a>00351            right_margin_ &gt;= other.bounding_box_.<a class="code" href="class_t_b_o_x.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();
<a name="l00352"></a>00352   }
<a name="l00353"></a>00353   <span class="comment">// Returns the vertical overlap (by median) of this and other.</span>
<a name="l00354"></a>00354   <span class="comment">// WARNING! Only makes sense on horizontal partitions!</span>
<a name="l00355"></a><a class="code" href="classtesseract_1_1_col_partition.html#ad1f4094aa7dfd0ef6ccbbff2bf3082db">00355</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#ad1f4094aa7dfd0ef6ccbbff2bf3082db">VOverlap</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00356"></a>00356     <span class="keywordflow">return</span> <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(median_top_, other.median_top_) -
<a name="l00357"></a>00357            <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(median_bottom_, other.median_bottom_);
<a name="l00358"></a>00358   }
<a name="l00359"></a>00359   <span class="comment">// Returns the horizontal overlap (by median) of this and other.</span>
<a name="l00360"></a>00360   <span class="comment">// WARNING! Only makes sense on vertical partitions!</span>
<a name="l00361"></a><a class="code" href="classtesseract_1_1_col_partition.html#a02b35bf04f6f3fd0ad0d2d612d9a14f8">00361</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_col_partition.html#a02b35bf04f6f3fd0ad0d2d612d9a14f8">HOverlap</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00362"></a>00362     <span class="keywordflow">return</span> <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(median_right_, other.median_right_) -
<a name="l00363"></a>00363            <a class="code" href="ndminx_8h.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(median_left_, other.median_left_);
<a name="l00364"></a>00364   }
<a name="l00365"></a>00365   <span class="comment">// Returns true if this and other overlap significantly vertically.</span>
<a name="l00366"></a><a class="code" href="classtesseract_1_1_col_partition.html#af57cf2b0dd0f197b1d48ad670eb0c8fc">00366</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#af57cf2b0dd0f197b1d48ad670eb0c8fc">VOverlaps</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00367"></a>00367     <span class="keywordtype">int</span> overlap = VOverlap(other);
<a name="l00368"></a>00368     <span class="keywordtype">int</span> height = <a class="code" href="ndminx_8h.html#a74e75242132eaabbc1c512488a135926">MIN</a>(median_top_ - median_bottom_,
<a name="l00369"></a>00369                      other.median_top_ - other.median_bottom_);
<a name="l00370"></a>00370     <span class="keywordflow">return</span> overlap * 3 &gt; height;
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372   <span class="comment">// Returns true if the region types (aligned_text_) match.</span>
<a name="l00373"></a>00373   <span class="comment">// Lines never match anything, as they should never be merged or chained.</span>
<a name="l00374"></a><a class="code" href="classtesseract_1_1_col_partition.html#a774f9c6444621a78264fa2a2a401cf9a">00374</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a774f9c6444621a78264fa2a2a401cf9a">TypesMatch</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other)<span class="keyword"> const </span>{
<a name="l00375"></a>00375     <span class="keywordflow">return</span> TypesMatch(blob_type_, other.blob_type_);
<a name="l00376"></a>00376   }
<a name="l00377"></a><a class="code" href="classtesseract_1_1_col_partition.html#a1310c3b034870bdd2eabff87adbb702f">00377</a>   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a1310c3b034870bdd2eabff87adbb702f">TypesMatch</a>(<a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> type1, <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> type2) {
<a name="l00378"></a>00378     <span class="keywordflow">return</span> (type1 == type2 || type1 == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a8a98863f18016aa4ccfd2d07dbb092a4">BRT_UNKNOWN</a> || type2 == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a8a98863f18016aa4ccfd2d07dbb092a4">BRT_UNKNOWN</a>) &amp;&amp;
<a name="l00379"></a>00379            !<a class="code" href="class_b_l_o_b_n_b_o_x.html#a86decfe35457329f062098901d56015f">BLOBNBOX::IsLineType</a>(type1) &amp;&amp; !<a class="code" href="class_b_l_o_b_n_b_o_x.html#a86decfe35457329f062098901d56015f">BLOBNBOX::IsLineType</a>(type2);
<a name="l00380"></a>00380   }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382   <span class="comment">// Returns true if partitions is of horizontal line type</span>
<a name="l00383"></a><a class="code" href="classtesseract_1_1_col_partition.html#acf97b6bd6c867bb71f5cd639f19b9994">00383</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#acf97b6bd6c867bb71f5cd639f19b9994">IsLineType</a>()<span class="keyword"> const </span>{
<a name="l00384"></a>00384     <span class="keywordflow">return</span> <a class="code" href="publictypes_8h.html#adaf51915410883cb49ce4b2309528641">PTIsLineType</a>(type_);
<a name="l00385"></a>00385   }
<a name="l00386"></a>00386   <span class="comment">// Returns true if partitions is of image type</span>
<a name="l00387"></a><a class="code" href="classtesseract_1_1_col_partition.html#a0ae19652d302dcc8bfd9cab1bed18770">00387</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a0ae19652d302dcc8bfd9cab1bed18770">IsImageType</a>()<span class="keyword"> const </span>{
<a name="l00388"></a>00388     <span class="keywordflow">return</span> <a class="code" href="publictypes_8h.html#a92fa403305db196dae658fac2153f2e9">PTIsImageType</a>(type_);
<a name="l00389"></a>00389   }
<a name="l00390"></a>00390   <span class="comment">// Returns true if partitions is of text type</span>
<a name="l00391"></a><a class="code" href="classtesseract_1_1_col_partition.html#aaeb1d34b6b937a9d028f06562c985bd5">00391</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#aaeb1d34b6b937a9d028f06562c985bd5">IsTextType</a>()<span class="keyword"> const </span>{
<a name="l00392"></a>00392     <span class="keywordflow">return</span> <a class="code" href="publictypes_8h.html#a49b7c03fb4e55b82a8fd22b7c6094082">PTIsTextType</a>(type_);
<a name="l00393"></a>00393   }
<a name="l00394"></a>00394   <span class="comment">// Returns true if the partition is of an exclusively vertical type.</span>
<a name="l00395"></a><a class="code" href="classtesseract_1_1_col_partition.html#aec438c63bf754474982b2bb4e74148b5">00395</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#aec438c63bf754474982b2bb4e74148b5">IsVerticalType</a>()<span class="keyword"> const </span>{
<a name="l00396"></a>00396     <span class="keywordflow">return</span> blob_type_ == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575aea2da025a50db20db8213f96495dd4a6">BRT_VERT_TEXT</a> || blob_type_ == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a5d6cbdd0674e727feda3085026646f6a">BRT_VLINE</a>;
<a name="l00397"></a>00397   }
<a name="l00398"></a>00398   <span class="comment">// Returns true if the partition is of a definite horizontal type.</span>
<a name="l00399"></a><a class="code" href="classtesseract_1_1_col_partition.html#a4d59387e0ab7f94339b438954d5f1492">00399</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a4d59387e0ab7f94339b438954d5f1492">IsHorizontalType</a>()<span class="keyword"> const </span>{
<a name="l00400"></a>00400     <span class="keywordflow">return</span> blob_type_ == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a4f0b1431532d0e838187df32f2e822d7">BRT_TEXT</a> || blob_type_ == <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575a56cc149e97b34634dd39babda79ea17d">BRT_HLINE</a>;
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402   <span class="comment">// Returns true is the partition is of a type that cannot be merged.</span>
<a name="l00403"></a><a class="code" href="classtesseract_1_1_col_partition.html#a186886f273a6120362badb64ae4d79ce">00403</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a186886f273a6120362badb64ae4d79ce">IsUnMergeableType</a>()<span class="keyword"> const </span>{
<a name="l00404"></a>00404     <span class="keywordflow">return</span> <a class="code" href="class_b_l_o_b_n_b_o_x.html#aed57b07f933309970d23490dfc5a5e52">BLOBNBOX::UnMergeableType</a>(blob_type_) || type_ == <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60a639c79458d7bb60c9d6f26f661dee484">PT_NOISE</a>;
<a name="l00405"></a>00405   }
<a name="l00406"></a>00406   <span class="comment">// Returns true if this partition is a vertical line</span>
<a name="l00407"></a>00407   <span class="comment">// TODO(nbeato): Use PartitionType enum when Ray&#39;s code is submitted.</span>
<a name="l00408"></a><a class="code" href="classtesseract_1_1_col_partition.html#a75d609470c2e72b7ff7163d29dd5e8ec">00408</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a75d609470c2e72b7ff7163d29dd5e8ec">IsVerticalLine</a>()<span class="keyword"> const </span>{
<a name="l00409"></a>00409     <span class="keywordflow">return</span> IsVerticalType() &amp;&amp; IsLineType();
<a name="l00410"></a>00410   }
<a name="l00411"></a>00411   <span class="comment">// Returns true if this partition is a horizontal line</span>
<a name="l00412"></a>00412   <span class="comment">// TODO(nbeato): Use PartitionType enum when Ray&#39;s code is submitted.</span>
<a name="l00413"></a><a class="code" href="classtesseract_1_1_col_partition.html#a052bafacd4995721da746930d2df0dd2">00413</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_col_partition.html#a052bafacd4995721da746930d2df0dd2">IsHorizontalLine</a>()<span class="keyword"> const </span>{
<a name="l00414"></a>00414     <span class="keywordflow">return</span> IsHorizontalType() &amp;&amp; IsLineType();
<a name="l00415"></a>00415   }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417   <span class="comment">// Adds the given box to the partition, updating the partition bounds.</span>
<a name="l00418"></a>00418   <span class="comment">// The list of boxes in the partition is updated, ensuring that no box is</span>
<a name="l00419"></a>00419   <span class="comment">// recorded twice, and the boxes are kept in increasing left position.</span>
<a name="l00420"></a>00420   <span class="keywordtype">void</span> AddBox(<a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* box);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422   <span class="comment">// Removes the given box from the partition, updating the bounds.</span>
<a name="l00423"></a>00423   <span class="keywordtype">void</span> RemoveBox(<a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* box);
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   <span class="comment">// Returns the tallest box in the partition, as measured perpendicular to the</span>
<a name="l00426"></a>00426   <span class="comment">// presumed flow of text.</span>
<a name="l00427"></a>00427   <a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* BiggestBox();
<a name="l00428"></a>00428 
<a name="l00429"></a>00429   <span class="comment">// Returns the bounding box excluding the given box.</span>
<a name="l00430"></a>00430   <a class="code" href="class_t_b_o_x.html">TBOX</a> BoundsWithoutBox(<a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* box);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432   <span class="comment">// Claims the boxes in the boxes_list by marking them with a this owner</span>
<a name="l00433"></a>00433   <span class="comment">// pointer. If a box is already owned, then run Unique on it.</span>
<a name="l00434"></a>00434   <span class="keywordtype">void</span> ClaimBoxes(<a class="code" href="class_tess_result_callback1.html">WidthCallback</a>* cb);
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   <span class="comment">// NULL the owner of the blobs in this partition, so they can be deleted</span>
<a name="l00437"></a>00437   <span class="comment">// independently of the ColPartition.</span>
<a name="l00438"></a>00438   <span class="keywordtype">void</span> DisownBoxes();
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   <span class="comment">// Delete the boxes that this partition owns.</span>
<a name="l00441"></a>00441   <span class="keywordtype">void</span> DeleteBoxes();
<a name="l00442"></a>00442 
<a name="l00443"></a>00443   <span class="comment">// Returns true if this is a legal partition - meaning that the conditions</span>
<a name="l00444"></a>00444   <span class="comment">// left_margin &lt;= bounding_box left</span>
<a name="l00445"></a>00445   <span class="comment">// left_key &lt;= bounding box left key</span>
<a name="l00446"></a>00446   <span class="comment">// bounding box left &lt;= bounding box right</span>
<a name="l00447"></a>00447   <span class="comment">// and likewise for right margin and key</span>
<a name="l00448"></a>00448   <span class="comment">// are all met.</span>
<a name="l00449"></a>00449   <span class="keywordtype">bool</span> IsLegal();
<a name="l00450"></a>00450 
<a name="l00451"></a>00451   <span class="comment">// Returns true if the left and right edges are approximately equal.</span>
<a name="l00452"></a>00452   <span class="keywordtype">bool</span> MatchingColumns(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other) <span class="keyword">const</span>;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454   <span class="comment">// Returns true if the sizes match for two text partitions,</span>
<a name="l00455"></a>00455   <span class="comment">// taking orientation into account</span>
<a name="l00456"></a>00456   <span class="keywordtype">bool</span> MatchingSizes(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other) <span class="keyword">const</span>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <span class="comment">// Returns true if there is no tabstop violation in merging this and other.</span>
<a name="l00459"></a>00459   <span class="keywordtype">bool</span> ConfirmNoTabViolation(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other) <span class="keyword">const</span>;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461   <span class="comment">// Returns true if other has a similar stroke width to this.</span>
<a name="l00462"></a>00462   <span class="keywordtype">bool</span> MatchingStrokeWidth(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; other,
<a name="l00463"></a>00463                            <span class="keywordtype">double</span> fractional_tolerance,
<a name="l00464"></a>00464                            <span class="keywordtype">double</span> constant_tolerance) <span class="keyword">const</span>;
<a name="l00465"></a>00465   <span class="comment">// Returns true if candidate is an acceptable diacritic base char merge</span>
<a name="l00466"></a>00466   <span class="comment">// with this as the diacritic.</span>
<a name="l00467"></a>00467   <span class="keywordtype">bool</span> OKDiacriticMerge(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; candidate, <span class="keywordtype">bool</span> debug) <span class="keyword">const</span>;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <span class="comment">// Sets the sort key using either the tab vector, or the bounding box if</span>
<a name="l00470"></a>00470   <span class="comment">// the tab vector is NULL. If the tab_vector lies inside the bounding_box,</span>
<a name="l00471"></a>00471   <span class="comment">// use the edge of the box as a key any way.</span>
<a name="l00472"></a>00472   <span class="keywordtype">void</span> SetLeftTab(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_tab_vector.html">TabVector</a>* tab_vector);
<a name="l00473"></a>00473   <span class="keywordtype">void</span> SetRightTab(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_tab_vector.html">TabVector</a>* tab_vector);
<a name="l00474"></a>00474 
<a name="l00475"></a>00475   <span class="comment">// Copies the left/right tab from the src partition, but if take_box is</span>
<a name="l00476"></a>00476   <span class="comment">// true, copies the box instead and uses that as a key.</span>
<a name="l00477"></a>00477   <span class="keywordtype">void</span> CopyLeftTab(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; src, <span class="keywordtype">bool</span> take_box);
<a name="l00478"></a>00478   <span class="keywordtype">void</span> CopyRightTab(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; src, <span class="keywordtype">bool</span> take_box);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480   <span class="comment">// Returns the left rule line x coord of the leftmost blob.</span>
<a name="l00481"></a>00481   <span class="keywordtype">int</span> LeftBlobRule() <span class="keyword">const</span>;
<a name="l00482"></a>00482   <span class="comment">// Returns the right rule line x coord of the rightmost blob.</span>
<a name="l00483"></a>00483   <span class="keywordtype">int</span> RightBlobRule() <span class="keyword">const</span>;
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <span class="comment">// Add a partner above if upper, otherwise below.</span>
<a name="l00486"></a>00486   <span class="comment">// Add them uniquely and keep the list sorted by box left.</span>
<a name="l00487"></a>00487   <span class="comment">// Partnerships are added symmetrically to partner and this.</span>
<a name="l00488"></a>00488   <span class="keywordtype">void</span> AddPartner(<span class="keywordtype">bool</span> upper, <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* partner);
<a name="l00489"></a>00489   <span class="comment">// Removes the partner from this, but does not remove this from partner.</span>
<a name="l00490"></a>00490   <span class="comment">// This asymmetric removal is so as not to mess up the iterator that is</span>
<a name="l00491"></a>00491   <span class="comment">// working on partner&#39;s partner list.</span>
<a name="l00492"></a>00492   <span class="keywordtype">void</span> RemovePartner(<span class="keywordtype">bool</span> upper, <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* partner);
<a name="l00493"></a>00493   <span class="comment">// Returns the partner if the given partner is a singleton, otherwise NULL.</span>
<a name="l00494"></a>00494   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* SingletonPartner(<span class="keywordtype">bool</span> upper);
<a name="l00495"></a>00495 
<a name="l00496"></a>00496   <span class="comment">// Merge with the other partition and delete it.</span>
<a name="l00497"></a>00497   <span class="keywordtype">void</span> Absorb(<a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* other, <a class="code" href="class_tess_result_callback1.html">WidthCallback</a>* cb);
<a name="l00498"></a>00498 
<a name="l00499"></a>00499   <span class="comment">// Shares out any common boxes amongst the partitions, ensuring that no</span>
<a name="l00500"></a>00500   <span class="comment">// box stays in both. Returns true if anything was done.</span>
<a name="l00501"></a>00501   <span class="keywordtype">bool</span> Unique(<a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* other, <a class="code" href="class_tess_result_callback1.html">WidthCallback</a>* cb);
<a name="l00502"></a>00502   <span class="comment">// Returns true if the overlap between this and the merged pair of</span>
<a name="l00503"></a>00503   <span class="comment">// merge candidates is sufficiently trivial to be allowed.</span>
<a name="l00504"></a>00504   <span class="comment">// The merged box can graze the edge of this by the ok_box_overlap</span>
<a name="l00505"></a>00505   <span class="comment">// if that exceeds the margin to the median top and bottom.</span>
<a name="l00506"></a>00506   <span class="keywordtype">bool</span> OKMergeOverlap(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; merge1, <span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; merge2,
<a name="l00507"></a>00507                       <span class="keywordtype">int</span> ok_box_overlap, <span class="keywordtype">bool</span> debug);
<a name="l00508"></a>00508 
<a name="l00509"></a>00509   <span class="comment">// Find the blob at which to split this to minimize the overlap with the</span>
<a name="l00510"></a>00510   <span class="comment">// given box. Returns the first blob to go in the second partition.</span>
<a name="l00511"></a>00511   <a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* OverlapSplitBlob(<span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513   <span class="comment">// Split this partition keeping the first half in this and returning</span>
<a name="l00514"></a>00514   <span class="comment">// the second half.</span>
<a name="l00515"></a>00515   <span class="comment">// Splits by putting the split_blob and the blobs that follow</span>
<a name="l00516"></a>00516   <span class="comment">// in the second half, and the rest in the first half.</span>
<a name="l00517"></a>00517   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* SplitAtBlob(<a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* split_blob);
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   <span class="comment">// Splits this partition at the given x coordinate, returning the right</span>
<a name="l00520"></a>00520   <span class="comment">// half and keeping the left half in this.</span>
<a name="l00521"></a>00521   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* SplitAt(<span class="keywordtype">int</span> split_x);
<a name="l00522"></a>00522 
<a name="l00523"></a>00523   <span class="comment">// Recalculates all the coordinate limits of the partition.</span>
<a name="l00524"></a>00524   <span class="keywordtype">void</span> ComputeLimits();
<a name="l00525"></a>00525 
<a name="l00526"></a>00526   <span class="comment">// Returns the number of boxes that overlap the given box.</span>
<a name="l00527"></a>00527   <span class="keywordtype">int</span> CountOverlappingBoxes(<span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box);
<a name="l00528"></a>00528 
<a name="l00529"></a>00529   <span class="comment">// Computes and sets the type_, first_column_, last_column_ and column_set_.</span>
<a name="l00530"></a>00530   <span class="comment">// resolution refers to the ppi resolution of the image.</span>
<a name="l00531"></a>00531   <span class="keywordtype">void</span> SetPartitionType(<span class="keywordtype">int</span> resolution, <a class="code" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a>* columns);
<a name="l00532"></a>00532 
<a name="l00533"></a>00533   <span class="comment">// Returns the PartitionType from the current BlobRegionType and a column</span>
<a name="l00534"></a>00534   <span class="comment">// flow spanning type ColumnSpanningType, generated by</span>
<a name="l00535"></a>00535   <span class="comment">// ColPartitionSet::SpanningType, that indicates how the partition sits</span>
<a name="l00536"></a>00536   <span class="comment">// in the columns.</span>
<a name="l00537"></a>00537   <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> PartitionType(<a class="code" href="namespacetesseract.html#a1c442f32007891bd4ea6e885b34cc06a">ColumnSpanningType</a> flow) <span class="keyword">const</span>;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539   <span class="comment">// Returns the first and last column touched by this partition.</span>
<a name="l00540"></a>00540   <span class="comment">// resolution refers to the ppi resolution of the image.</span>
<a name="l00541"></a>00541   <span class="keywordtype">void</span> ColumnRange(<span class="keywordtype">int</span> resolution, <a class="code" href="classtesseract_1_1_col_partition_set.html">ColPartitionSet</a>* columns,
<a name="l00542"></a>00542                    <span class="keywordtype">int</span>* first_col, <span class="keywordtype">int</span>* last_col);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544   <span class="comment">// Sets the internal flags good_width_ and good_column_.</span>
<a name="l00545"></a>00545   <span class="keywordtype">void</span> SetColumnGoodness(<a class="code" href="class_tess_result_callback1.html">WidthCallback</a>* cb);
<a name="l00546"></a>00546 
<a name="l00547"></a>00547   <span class="comment">// Determines whether the blobs in this partition mostly represent</span>
<a name="l00548"></a>00548   <span class="comment">// a leader (fixed pitch sequence) and sets the member blobs accordingly.</span>
<a name="l00549"></a>00549   <span class="comment">// Note that height is assumed to have been tested elsewhere, and that this</span>
<a name="l00550"></a>00550   <span class="comment">// function will find most fixed-pitch text as leader without a height filter.</span>
<a name="l00551"></a>00551   <span class="comment">// Leader detection is limited to sequences of identical width objects,</span>
<a name="l00552"></a>00552   <span class="comment">// such as .... or ----, so patterns, such as .-.-.-.-. will not be found.</span>
<a name="l00553"></a>00553   <span class="keywordtype">bool</span> MarkAsLeaderIfMonospaced();
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">// Sets all blobs with the partition blob type and flow.</span>
<a name="l00556"></a>00556   <span class="keywordtype">void</span> SetBlobTypes();
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="comment">// Adds this ColPartition to a matching WorkingPartSet if one can be found,</span>
<a name="l00559"></a>00559   <span class="comment">// otherwise starts a new one in the appropriate column, ending the previous.</span>
<a name="l00560"></a>00560   <span class="keywordtype">void</span> AddToWorkingSet(<span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; bleft, <span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; tright,
<a name="l00561"></a>00561                        <span class="keywordtype">int</span> resolution, ColPartition_LIST* used_parts,
<a name="l00562"></a>00562                        WorkingPartSet_LIST* working_set);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564   <span class="comment">// From the given block_parts list, builds one or more BLOCKs and</span>
<a name="l00565"></a>00565   <span class="comment">// corresponding TO_BLOCKs, such that the line spacing is uniform in each.</span>
<a name="l00566"></a>00566   <span class="comment">// Created blocks are appended to the end of completed_blocks and to_blocks.</span>
<a name="l00567"></a>00567   <span class="comment">// The used partitions are put onto used_parts, as they may still be referred</span>
<a name="l00568"></a>00568   <span class="comment">// to in the partition grid. bleft, tright and resolution are the bounds</span>
<a name="l00569"></a>00569   <span class="comment">// and resolution of the original image.</span>
<a name="l00570"></a>00570   <span class="keyword">static</span> <span class="keywordtype">void</span> LineSpacingBlocks(<span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; bleft, <span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; tright,
<a name="l00571"></a>00571                                 <span class="keywordtype">int</span> resolution,
<a name="l00572"></a>00572                                 ColPartition_LIST* block_parts,
<a name="l00573"></a>00573                                 ColPartition_LIST* used_parts,
<a name="l00574"></a>00574                                 BLOCK_LIST* completed_blocks,
<a name="l00575"></a>00575                                 TO_BLOCK_LIST* to_blocks);
<a name="l00576"></a>00576   <span class="comment">// Constructs a block from the given list of partitions.</span>
<a name="l00577"></a>00577   <span class="comment">// Arguments are as LineSpacingBlocks above.</span>
<a name="l00578"></a>00578   <span class="keyword">static</span> <a class="code" href="class_t_o___b_l_o_c_k.html">TO_BLOCK</a>* MakeBlock(<span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; bleft, <span class="keyword">const</span> <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>&amp; tright,
<a name="l00579"></a>00579                              ColPartition_LIST* block_parts,
<a name="l00580"></a>00580                              ColPartition_LIST* used_parts);
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 
<a name="l00583"></a>00583   <span class="comment">// Returns a copy of everything except the list of boxes. The resulting</span>
<a name="l00584"></a>00584   <span class="comment">// ColPartition is only suitable for keeping in a column candidate list.</span>
<a name="l00585"></a>00585   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* ShallowCopy() <span class="keyword">const</span>;
<a name="l00586"></a>00586   <span class="comment">// Returns a copy of everything with a shallow copy of the blobs.</span>
<a name="l00587"></a>00587   <span class="comment">// The blobs are still owned by their original parent, so they are</span>
<a name="l00588"></a>00588   <span class="comment">// treated as read-only.</span>
<a name="l00589"></a>00589   <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>* CopyButDontOwnBlobs();
<a name="l00590"></a>00590 
<a name="l00591"></a>00591   <span class="comment">// Provides a color for BBGrid to draw the rectangle.</span>
<a name="l00592"></a>00592   <a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>  BoxColor() <span class="keyword">const</span>;
<a name="l00593"></a>00593 
<a name="l00594"></a>00594   <span class="comment">// Prints debug information on this.</span>
<a name="l00595"></a>00595   <span class="keywordtype">void</span> Print() <span class="keyword">const</span>;
<a name="l00596"></a>00596   <span class="comment">// Prints debug information on the colors.</span>
<a name="l00597"></a>00597   <span class="keywordtype">void</span> PrintColors();
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   <span class="comment">// Sets the types of all partitions in the run to be the max of the types.</span>
<a name="l00600"></a>00600   <span class="keywordtype">void</span> SmoothPartnerRun(<span class="keywordtype">int</span> working_set_count);
<a name="l00601"></a>00601 
<a name="l00602"></a>00602   <span class="comment">// Cleans up the partners of the given type so that there is at most</span>
<a name="l00603"></a>00603   <span class="comment">// one partner. This makes block creation simpler.</span>
<a name="l00604"></a>00604   <span class="comment">// If get_desperate is true, goes to more desperate merge methods</span>
<a name="l00605"></a>00605   <span class="comment">// to merge flowing text before breaking partnerships.</span>
<a name="l00606"></a>00606   <span class="keywordtype">void</span> RefinePartners(<a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> type, <span class="keywordtype">bool</span> get_desparate,
<a name="l00607"></a>00607                       <a class="code" href="classtesseract_1_1_col_partition_grid.html">ColPartitionGrid</a>* grid);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609   <span class="comment">// Returns true if this column partition is in the same column as</span>
<a name="l00610"></a>00610   <span class="comment">// part. This function will only work after the SetPartitionType function</span>
<a name="l00611"></a>00611   <span class="comment">// has been called on both column partitions. This is useful for</span>
<a name="l00612"></a>00612   <span class="comment">// doing a SideSearch when you want things in the same page column.</span>
<a name="l00613"></a>00613   <span class="keywordtype">bool</span> IsInSameColumnAs(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_col_partition.html">ColPartition</a>&amp; part) <span class="keyword">const</span>;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615   <span class="comment">// Sets the column bounds. Primarily used in testing.</span>
<a name="l00616"></a><a class="code" href="classtesseract_1_1_col_partition.html#adeffeaa147be84acfa0165e923f7b591">00616</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#adeffeaa147be84acfa0165e923f7b591">set_first_column</a>(<span class="keywordtype">int</span> column) {
<a name="l00617"></a>00617     first_column_ = column;
<a name="l00618"></a>00618   }
<a name="l00619"></a><a class="code" href="classtesseract_1_1_col_partition.html#ac3a311afb64d7c68f6f7a00a706d58d0">00619</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_col_partition.html#ac3a311afb64d7c68f6f7a00a706d58d0">set_last_column</a>(<span class="keywordtype">int</span> column) {
<a name="l00620"></a>00620     last_column_ = column;
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623  <span class="keyword">private</span>:
<a name="l00624"></a>00624   <span class="comment">// enum to refer to the entries in a neigbourhood of lines.</span>
<a name="l00625"></a>00625   <span class="comment">// Used by SmoothSpacings to test for blips with OKSpacingBlip.</span>
<a name="l00626"></a>00626   <span class="keyword">enum</span> SpacingNeighbourhood {
<a name="l00627"></a>00627     PN_ABOVE2,
<a name="l00628"></a>00628     PN_ABOVE1,
<a name="l00629"></a>00629     PN_UPPER,
<a name="l00630"></a>00630     PN_LOWER,
<a name="l00631"></a>00631     PN_BELOW1,
<a name="l00632"></a>00632     PN_BELOW2,
<a name="l00633"></a>00633     PN_COUNT
<a name="l00634"></a>00634   };
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   <span class="comment">// Cleans up the partners above if upper is true, else below.</span>
<a name="l00637"></a>00637   <span class="comment">// If get_desperate is true, goes to more desperate merge methods</span>
<a name="l00638"></a>00638   <span class="comment">// to merge flowing text before breaking partnerships.</span>
<a name="l00639"></a>00639   <span class="keywordtype">void</span> RefinePartnersInternal(<span class="keywordtype">bool</span> upper, <span class="keywordtype">bool</span> get_desperate,
<a name="l00640"></a>00640                               ColPartitionGrid* grid);
<a name="l00641"></a>00641   <span class="comment">// Restricts the partners to only desirable types. For text and BRT_HLINE this</span>
<a name="l00642"></a>00642   <span class="comment">// means the same type_ , and for image types it means any image type.</span>
<a name="l00643"></a>00643   <span class="keywordtype">void</span> RefinePartnersByType(<span class="keywordtype">bool</span> upper, ColPartition_CLIST* partners);
<a name="l00644"></a>00644   <span class="comment">// Remove transitive partnerships: this&lt;-&gt;a, and a&lt;-&gt;b and this&lt;-&gt;b.</span>
<a name="l00645"></a>00645   <span class="comment">// Gets rid of this&lt;-&gt;b, leaving a clean chain.</span>
<a name="l00646"></a>00646   <span class="comment">// Also if we have this&lt;-&gt;a and a&lt;-&gt;this, then gets rid of this&lt;-&gt;a, as</span>
<a name="l00647"></a>00647   <span class="comment">// this has multiple partners.</span>
<a name="l00648"></a>00648   <span class="keywordtype">void</span> RefinePartnerShortcuts(<span class="keywordtype">bool</span> upper, ColPartition_CLIST* partners);
<a name="l00649"></a>00649   <span class="comment">// If multiple text partners can be merged, then do so.</span>
<a name="l00650"></a>00650   <span class="comment">// If desperate is true, then an increase in overlap with the merge is</span>
<a name="l00651"></a>00651   <span class="comment">// allowed. If the overlap increases, then the desperately_merged_ flag</span>
<a name="l00652"></a>00652   <span class="comment">// is set, indicating that the textlines probably need to be regenerated</span>
<a name="l00653"></a>00653   <span class="comment">// by aggressive line fitting/splitting, as there are probably vertically</span>
<a name="l00654"></a>00654   <span class="comment">// joined blobs that cross textlines.</span>
<a name="l00655"></a>00655   <span class="keywordtype">void</span> RefineTextPartnersByMerge(<span class="keywordtype">bool</span> upper, <span class="keywordtype">bool</span> desperate,
<a name="l00656"></a>00656                                  ColPartition_CLIST* partners,
<a name="l00657"></a>00657                                  ColPartitionGrid* grid);
<a name="l00658"></a>00658   <span class="comment">// Keep the partner with the biggest overlap.</span>
<a name="l00659"></a>00659   <span class="keywordtype">void</span> RefinePartnersByOverlap(<span class="keywordtype">bool</span> upper, ColPartition_CLIST* partners);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661   <span class="comment">// Return true if bbox belongs better in this than other.</span>
<a name="l00662"></a>00662   <span class="keywordtype">bool</span> ThisPartitionBetter(<a class="code" href="class_b_l_o_b_n_b_o_x.html">BLOBNBOX</a>* bbox, <span class="keyword">const</span> ColPartition&amp; other);
<a name="l00663"></a>00663 
<a name="l00664"></a>00664   <span class="comment">// Smoothes the spacings in the list into groups of equal linespacing.</span>
<a name="l00665"></a>00665   <span class="comment">// resolution is the resolution of the original image, used as a basis</span>
<a name="l00666"></a>00666   <span class="comment">// for thresholds in change of spacing. page_height is in pixels.</span>
<a name="l00667"></a>00667   <span class="keyword">static</span> <span class="keywordtype">void</span> SmoothSpacings(<span class="keywordtype">int</span> resolution, <span class="keywordtype">int</span> page_height,
<a name="l00668"></a>00668                              ColPartition_LIST* parts);
<a name="l00669"></a>00669 
<a name="l00670"></a>00670   <span class="comment">// Returns true if the parts array of pointers to partitions matches the</span>
<a name="l00671"></a>00671   <span class="comment">// condition for a spacing blip. See SmoothSpacings for what this means</span>
<a name="l00672"></a>00672   <span class="comment">// and how it is used.</span>
<a name="l00673"></a>00673   <span class="keyword">static</span> <span class="keywordtype">bool</span> OKSpacingBlip(<span class="keywordtype">int</span> resolution, <span class="keywordtype">int</span> median_spacing,
<a name="l00674"></a>00674                             ColPartition** parts);
<a name="l00675"></a>00675 
<a name="l00676"></a>00676   <span class="comment">// Returns true if both the top and bottom spacings of this match the given</span>
<a name="l00677"></a>00677   <span class="comment">// spacing to within suitable margins dictated by the image resolution.</span>
<a name="l00678"></a>00678   <span class="keywordtype">bool</span> SpacingEqual(<span class="keywordtype">int</span> spacing, <span class="keywordtype">int</span> resolution) <span class="keyword">const</span>;
<a name="l00679"></a>00679 
<a name="l00680"></a>00680   <span class="comment">// Returns true if both the top and bottom spacings of this and other</span>
<a name="l00681"></a>00681   <span class="comment">// match to within suitable margins dictated by the image resolution.</span>
<a name="l00682"></a>00682   <span class="keywordtype">bool</span> SpacingsEqual(<span class="keyword">const</span> ColPartition&amp; other, <span class="keywordtype">int</span> resolution) <span class="keyword">const</span>;
<a name="l00683"></a>00683 
<a name="l00684"></a>00684   <span class="comment">// Returns true if the sum spacing of this and other match the given</span>
<a name="l00685"></a>00685   <span class="comment">// spacing (or twice the given spacing) to within a suitable margin dictated</span>
<a name="l00686"></a>00686   <span class="comment">// by the image resolution.</span>
<a name="l00687"></a>00687   <span class="keywordtype">bool</span> SummedSpacingOK(<span class="keyword">const</span> ColPartition&amp; other,
<a name="l00688"></a>00688                        <span class="keywordtype">int</span> spacing, <span class="keywordtype">int</span> resolution) <span class="keyword">const</span>;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690   <span class="comment">// Returns a suitable spacing margin that can be applied to bottoms of</span>
<a name="l00691"></a>00691   <span class="comment">// text lines, based on the resolution and the stored side_step_.</span>
<a name="l00692"></a>00692   <span class="keywordtype">int</span> BottomSpacingMargin(<span class="keywordtype">int</span> resolution) <span class="keyword">const</span>;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694   <span class="comment">// Returns a suitable spacing margin that can be applied to tops of</span>
<a name="l00695"></a>00695   <span class="comment">// text lines, based on the resolution and the stored side_step_.</span>
<a name="l00696"></a>00696   <span class="keywordtype">int</span> TopSpacingMargin(<span class="keywordtype">int</span> resolution) <span class="keyword">const</span>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698   <span class="comment">// Returns true if the median text sizes of this and other agree to within</span>
<a name="l00699"></a>00699   <span class="comment">// a reasonable multiplicative factor.</span>
<a name="l00700"></a>00700   <span class="keywordtype">bool</span> SizesSimilar(<span class="keyword">const</span> ColPartition&amp; other) <span class="keyword">const</span>;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702   <span class="comment">// Computes and returns in start, end a line segment formed from a</span>
<a name="l00703"></a>00703   <span class="comment">// forwards-iterated group of left edges of partitions that satisfy the</span>
<a name="l00704"></a>00704   <span class="comment">// condition that the rightmost left margin is to the left of the</span>
<a name="l00705"></a>00705   <span class="comment">// leftmost left bounding box edge.</span>
<a name="l00706"></a>00706   <span class="comment">// TODO(rays) Not good enough. Needs improving to tightly wrap text in both</span>
<a name="l00707"></a>00707   <span class="comment">// directions, and to loosely wrap images.</span>
<a name="l00708"></a>00708   <span class="keyword">static</span> <span class="keywordtype">void</span> LeftEdgeRun(ColPartition_IT* part_it,
<a name="l00709"></a>00709                           <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>* start, <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>* end);
<a name="l00710"></a>00710   <span class="comment">// Computes and returns in start, end a line segment formed from a</span>
<a name="l00711"></a>00711   <span class="comment">// backwards-iterated group of right edges of partitions that satisfy the</span>
<a name="l00712"></a>00712   <span class="comment">// condition that the leftmost right margin is to the right of the</span>
<a name="l00713"></a>00713   <span class="comment">// rightmost right bounding box edge.</span>
<a name="l00714"></a>00714   <span class="comment">// TODO(rays) Not good enough. Needs improving to tightly wrap text in both</span>
<a name="l00715"></a>00715   <span class="comment">// directions, and to loosely wrap images.</span>
<a name="l00716"></a>00716   <span class="keyword">static</span> <span class="keywordtype">void</span> RightEdgeRun(ColPartition_IT* part_it,
<a name="l00717"></a>00717                            <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>* start, <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a>* end);
<a name="l00718"></a>00718 
<a name="l00719"></a>00719   <span class="comment">// The margins are determined by the position of the nearest vertically</span>
<a name="l00720"></a>00720   <span class="comment">// overlapping neighbour to the side. They indicate the maximum extent</span>
<a name="l00721"></a>00721   <span class="comment">// that the block/column may be extended without touching something else.</span>
<a name="l00722"></a>00722   <span class="comment">// Leftmost coordinate that the region may occupy over the y limits.</span>
<a name="l00723"></a>00723   <span class="keywordtype">int</span> left_margin_;
<a name="l00724"></a>00724   <span class="comment">// Rightmost coordinate that the region may occupy over the y limits.</span>
<a name="l00725"></a>00725   <span class="keywordtype">int</span> right_margin_;
<a name="l00726"></a>00726   <span class="comment">// Bounding box of all blobs in the partition.</span>
<a name="l00727"></a>00727   <a class="code" href="class_t_b_o_x.html">TBOX</a> bounding_box_;
<a name="l00728"></a>00728   <span class="comment">// Median top and bottom of blobs in this partition.</span>
<a name="l00729"></a>00729   <span class="keywordtype">int</span> median_bottom_;
<a name="l00730"></a>00730   <span class="keywordtype">int</span> median_top_;
<a name="l00731"></a>00731   <span class="comment">// Median height of blobs in this partition.</span>
<a name="l00732"></a>00732   <span class="comment">// TODO(rays) rename median_height_.</span>
<a name="l00733"></a>00733   <span class="keywordtype">int</span> median_size_;
<a name="l00734"></a>00734   <span class="comment">// Median left and right of blobs in this partition.</span>
<a name="l00735"></a>00735   <span class="keywordtype">int</span> median_left_;
<a name="l00736"></a>00736   <span class="keywordtype">int</span> median_right_;
<a name="l00737"></a>00737   <span class="comment">// Median width of blobs in this partition.</span>
<a name="l00738"></a>00738   <span class="keywordtype">int</span> median_width_;
<a name="l00739"></a>00739   <span class="comment">// blob_region_type_ for the blobs in this partition.</span>
<a name="l00740"></a>00740   <a class="code" href="blobbox_8h.html#aebfaf711760a99b60c297d1d619df575">BlobRegionType</a> blob_type_;
<a name="l00741"></a>00741   <a class="code" href="blobbox_8h.html#aa72f1499398e9694bf46752e1cc895e1">BlobTextFlowType</a> flow_;  <span class="comment">// Quality of text flow.</span>
<a name="l00742"></a>00742   <span class="comment">// Total of GoodTextBlob results for all blobs in the partition.</span>
<a name="l00743"></a>00743   <span class="keywordtype">int</span> good_blob_score_;
<a name="l00744"></a>00744   <span class="comment">// True if this partition has a common width.</span>
<a name="l00745"></a>00745   <span class="keywordtype">bool</span> good_width_;
<a name="l00746"></a>00746   <span class="comment">// True if this is a good column candidate.</span>
<a name="l00747"></a>00747   <span class="keywordtype">bool</span> good_column_;
<a name="l00748"></a>00748   <span class="comment">// True if the left_key_ is from a tab vector.</span>
<a name="l00749"></a>00749   <span class="keywordtype">bool</span> left_key_tab_;
<a name="l00750"></a>00750   <span class="comment">// True if the right_key_ is from a tab vector.</span>
<a name="l00751"></a>00751   <span class="keywordtype">bool</span> right_key_tab_;
<a name="l00752"></a>00752   <span class="comment">// Left and right sort keys for the edges of the partition.</span>
<a name="l00753"></a>00753   <span class="comment">// If the respective *_key_tab_ is true then this key came from a tab vector.</span>
<a name="l00754"></a>00754   <span class="comment">// If not, then the class promises to keep the key equal to the sort key</span>
<a name="l00755"></a>00755   <span class="comment">// for the respective edge of the bounding box at the MidY, so that</span>
<a name="l00756"></a>00756   <span class="comment">// LeftAtY and RightAtY always returns an x coordinate on the line parallel</span>
<a name="l00757"></a>00757   <span class="comment">// to vertical_ through the bounding box edge at MidY.</span>
<a name="l00758"></a>00758   <span class="keywordtype">int</span> left_key_;
<a name="l00759"></a>00759   <span class="keywordtype">int</span> right_key_;
<a name="l00760"></a>00760   <span class="comment">// Type of this partition after looking at its relation to the columns.</span>
<a name="l00761"></a>00761   <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> type_;
<a name="l00762"></a>00762   <span class="comment">// All boxes in the partition stored in increasing left edge coordinate.</span>
<a name="l00763"></a>00763   BLOBNBOX_CLIST boxes_;
<a name="l00764"></a>00764   <span class="comment">// The global vertical skew direction.</span>
<a name="l00765"></a>00765   <a class="code" href="class_i_c_o_o_r_d.html" title="integer coordinate">ICOORD</a> vertical_;
<a name="l00766"></a>00766   <span class="comment">// The partitions above that matched this.</span>
<a name="l00767"></a>00767   ColPartition_CLIST upper_partners_;
<a name="l00768"></a>00768   <span class="comment">// The partitions below that matched this.</span>
<a name="l00769"></a>00769   ColPartition_CLIST lower_partners_;
<a name="l00770"></a>00770   <span class="comment">// The WorkingPartSet it lives in while blocks are being made.</span>
<a name="l00771"></a>00771   WorkingPartSet* working_set_;
<a name="l00772"></a>00772   <span class="comment">// True when the partition&#39;s ownership has been taken from the grid and</span>
<a name="l00773"></a>00773   <span class="comment">// placed in a working set, or, after that, in the good_parts_ list.</span>
<a name="l00774"></a>00774   <span class="keywordtype">bool</span> block_owned_;
<a name="l00775"></a>00775   <span class="comment">// Flag to indicate that this partition was subjected to a desperate merge,</span>
<a name="l00776"></a>00776   <span class="comment">// and therefore the textlines need rebuilding.</span>
<a name="l00777"></a>00777   <span class="keywordtype">bool</span> desperately_merged_;
<a name="l00778"></a>00778   <span class="comment">// The first and last column that this partition applies to.</span>
<a name="l00779"></a>00779   <span class="comment">// Flowing partitions (see type_) will have an equal first and last value</span>
<a name="l00780"></a>00780   <span class="comment">// of the form 2n + 1, where n is the zero-based index into the partitions</span>
<a name="l00781"></a>00781   <span class="comment">// in column_set_. (See ColPartitionSet::GetColumnByIndex).</span>
<a name="l00782"></a>00782   <span class="comment">// Heading partitions will have unequal values of the same form.</span>
<a name="l00783"></a>00783   <span class="comment">// Pullout partitions will have equal values, but may have even values,</span>
<a name="l00784"></a>00784   <span class="comment">// indicating placement between columns.</span>
<a name="l00785"></a>00785   <span class="keywordtype">int</span> first_column_;
<a name="l00786"></a>00786   <span class="keywordtype">int</span> last_column_;
<a name="l00787"></a>00787   <span class="comment">// Column_set_ is the column layout applicable to this ColPartition.</span>
<a name="l00788"></a>00788   ColPartitionSet* column_set_;
<a name="l00789"></a>00789   <span class="comment">// Linespacing data.</span>
<a name="l00790"></a>00790   <span class="keywordtype">int</span> side_step_;       <span class="comment">// Median y-shift to next blob on same line.</span>
<a name="l00791"></a>00791   <span class="keywordtype">int</span> top_spacing_;     <span class="comment">// Line spacing from median_top_.</span>
<a name="l00792"></a>00792   <span class="keywordtype">int</span> bottom_spacing_;  <span class="comment">// Line spacing from median_bottom_.</span>
<a name="l00793"></a>00793 
<a name="l00794"></a>00794   <span class="comment">// Type of this partition before considering it as a table cell. This is</span>
<a name="l00795"></a>00795   <span class="comment">// used to revert the type if a partition is first marked as a table cell but</span>
<a name="l00796"></a>00796   <span class="comment">// later filtering steps decide it does not belong to a table</span>
<a name="l00797"></a>00797   <a class="code" href="publictypes_8h.html#a03566528a98c079dafeebf00502f2b60">PolyBlockType</a> type_before_table_;
<a name="l00798"></a>00798   <span class="keywordtype">bool</span> inside_table_column_;  <span class="comment">// Check whether the current partition has been</span>
<a name="l00799"></a>00799                               <span class="comment">// assigned to a table column</span>
<a name="l00800"></a>00800   <span class="comment">// Nearest neighbor above with major x-overlap</span>
<a name="l00801"></a>00801   ColPartition* nearest_neighbor_above_;
<a name="l00802"></a>00802   <span class="comment">// Nearest neighbor below with major x-overlap</span>
<a name="l00803"></a>00803   ColPartition* nearest_neighbor_below_;
<a name="l00804"></a>00804   <span class="keywordtype">int</span> space_above_;      <span class="comment">// Distance from nearest_neighbor_above</span>
<a name="l00805"></a>00805   <span class="keywordtype">int</span> space_below_;      <span class="comment">// Distance from nearest_neighbor_below</span>
<a name="l00806"></a>00806   <span class="keywordtype">int</span> space_to_left_;    <span class="comment">// Distance from the left edge of the column</span>
<a name="l00807"></a>00807   <span class="keywordtype">int</span> space_to_right_;   <span class="comment">// Distance from the right edge of the column</span>
<a name="l00808"></a>00808   <span class="comment">// Color foreground/background data.</span>
<a name="l00809"></a>00809   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> color1_[<a class="code" href="namespacetesseract.html#abd090245debb6dcc506aba8f62da938b">kRGBRMSColors</a>];
<a name="l00810"></a>00810   <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> color2_[<a class="code" href="namespacetesseract.html#abd090245debb6dcc506aba8f62da938b">kRGBRMSColors</a>];
<a name="l00811"></a>00811   <span class="keywordtype">bool</span> owns_blobs_;  <span class="comment">// Does the partition own its blobs?</span>
<a name="l00812"></a>00812 };
<a name="l00813"></a>00813 
<a name="l00814"></a>00814 <span class="comment">// Typedef it now in case it becomes a class later.</span>
<a name="l00815"></a>00815 <span class="keyword">typedef</span> GridSearch&lt;ColPartition,
<a name="l00816"></a>00816                    ColPartition_CLIST,
<a name="l00817"></a><a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">00817</a>                    ColPartition_C_IT&gt; <a class="code" href="namespacetesseract.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a>;
<a name="l00818"></a>00818 
<a name="l00819"></a>00819 }  <span class="comment">// namespace tesseract.</span>
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 <span class="preprocessor">#endif  // TESSERACT_TEXTORD_COLPARTITION_H__</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="colpartition_8h.html">colpartition.h</a>      </li>
      <li class="footer">Generated on Sat Oct 22 2011 08:54:35 for Tesseract by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
